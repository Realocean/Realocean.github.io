<!DOCTYPE html>
<html>

<head>
    <title>仓库管理</title>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="Author" content="larry" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../../statics/common/cascader/cascader/cascader.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../statics/common/layui/css/layui.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../statics/common/layui/css/autocomplete.css">
    <link rel="stylesheet" type="text/css" href="../../statics/common/layui/css/soulTable.css">
    <link rel="stylesheet" type="text/css" href="../../statics/plugins/ztree/css/metroStyle/metroStyle.css">
    <link rel="stylesheet" type="text/css" href="../../statics/new_css/common.css">
    <link rel="stylesheet" type="text/css" href="../../statics/new_css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../statics/new_css/list-search-table.css">
    <script type="text/javascript" src="../../statics/plugins/jquery.min.js"></script>
    <script type="text/javascript" src="../../statics/common/lib/vue.min.js"></script>
    <script type="text/javascript" src="../../statics/plugins/ztree/jquery.ztree.all.min.js"></script>
    <script type="text/javascript" src="../../statics/common/layui/layui.all.js"></script>
    <script type="text/javascript" src="../../statics/common/js/axios.min.js"></script>
    <script type="text/javascript" src="../../statics/common/js/xm-select.js"></script>
    <script type="text/javascript" src="../../statics/js/common.js"></script>
    <script type="text/javascript" src="../../statics/js/upload.js"></script>
    <script type="text/javascript" src="../../statics/common/step/steps.js"></script>
    <link rel="stylesheet" href="../../statics/new_css/jxcPublicAll.css" media="all">
    <link href="../../statics/common/photoviewer/dist/photoviewer.css" rel="stylesheet">
    <link rel="stylesheet" href="../../statics/common/step/steps.css">
    <link rel="stylesheet" href="../../statics/js/modules/cropper/cropper.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../statics/new_css/viewer.min.css">
    <script src="../../statics/js/modules/cropper/cropper.min.js"></script>
    <script src="../../statics/common/photoviewer/dist/photoviewer.js"></script>
    <script src="../../statics/common/layui/autocomplete.js"></script>
    <script src="../../statics/js/modules/viewer/viewer.min.js"></script>
    <script src="../../statics/common/print-js/print.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../../statics/common/print-js/print.min.css">
    <script type="text/javascript" src="../../statics/common/xmselect/xm-select.js"></script>
    <script type="text/javascript" src="../../statics/js/searchview.js"></script>
    <script type="text/javascript" src="../../statics/js/tableedit.js"></script>
    <!-- 引入组件库 -->
    <link rel="stylesheet" type="text/css" href="../../statics/new_css/index.css">
    <link rel="stylesheet" type="text/css" href="../../statics/common/css/new_fonts/iconfont.css">
    <style>
        .details-tab-content-box .flex{
            cursor: pointer;
        }
        .layui-form-label{
            min-width: 100px !important;
        }
    </style>
</head>
<body class="ren-body">
    <div id="rrapp" v-cloak>
        <div class="mvvm-table">
            <div class="details-conteiner">
                    <div class="details-layui-row">
                        <div class="list-search-title-box">
                            <form class="layui-form" style="box-shadow: 0 0 20px #eee;padding-right: 15px;">
                                <section class="jxc-section">
                                    <div class="card layui-row">
                                        <div class="layui-form-item ">
                                            <div class="layui-inline layui-col-md3 layui-col-sm4 layui-col-xs12">
                                                <label class="layui-form-label">仓库名称</label>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input searchVal"
                                                        v-model="q.warehouseName" placeholder="请输入仓库名称" />
                                                </div>
                                            </div>
                                            <div class="layui-inline layui-col-md3 layui-col-sm4 layui-col-xs12">
                                                <label class="layui-form-label">归属公司/部门</label>
                                                <div class="layui-input-inline">
                                                    <input v-model="q.deptName" type="text" style="cursor:pointer;"
                                                        @click="deptTree" readonly="readonly" class="layui-input searchVal"
                                                        placeholder="请选择归属公司/部门" />
                                                </div>
                                            </div>
                                            <div class="layui-inline layui-col-md3 layui-col-sm4 layui-col-xs12">
                                                <label class="layui-form-label">备注信息</label>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input searchVal" v-model="q.remarks"
                                                        placeholder="请输入备注信息" />
                                                </div>
                                            </div>

                                            <div class="layui-inline layui-col-md3 layui-col-sm4 layui-col-xs12">
                                                <div style="display: flex;align-items: center;">
                                                    <!-- #3FACB3 -->
                                                    <a class="layui-btn search-btn" @click="query">查询</a>
                                                    <a class="layui-btn reset-btn" @click="reset">重置</a>
                                                    <!-- <div @click="bindFilter"
                                                    style="margin-left: 10px;cursor: pointer;user-select: none;">
                                                    <span style="color: #3FACB3;">高级筛选</span>
                                                    <img src="../../../statics/images/gjsx2x.png" style="width:14px">
                                                </div> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </form>
                        </div>
                        <div class="list-search-title-box ground-search-btn">
                            <div style="display: flex;align-items: center;justify-content: flex-start;">
                                <div class="layui-form-item layui-row">
                                    <div class="list-search-form-button">
                                        <mperm v-m-perm="['warehouse:warehouse:save']">
                                            <a class="layui-btn btn-primary" @click="add">新增</a>
                                        </mperm>
                                        <mperm v-m-perm="['warehouse:warehouse:export']">
                                            <a class="layui-btn btn-warning" @click="exports">导出</a>
                                        </mperm>
                                    </div>
                                    <!--<div @click="bindFilter" style="position: absolute;right: 30px;font-size: 14px;color: #1a1f33;">
                                    <span>高级筛选</span>
                                    <i class="layui-icon" :class="isFilter?'layui-icon-up':'layui-icon-down'"  data-cascader="icon"></i>
                            </div>-->
                                </div>
                            </div>
                        </div>
                        <div class="layui-tab-item layui-show">
                            <table class="layui-hide" id="grid" lay-filter="grid" lay-data="{height: 'full'}"></table>
                        </div>
                    </div>
            </div>
        </div>
        <!-- 新增/修改表单-->
        <form v-show="editForm" class="layui-form ren-form" id="editForm"  style="overflow: hidden">

<!--                <div class="list-search-sup-title new-layui-title border-bottom-dashed"> </div>-->

                        <div class="layui-row layui-form-row-content">
                            <div class="layui-inline layui-col-md12 layui-col-sm12 layui-col-xs12">
                                <label class="layui-form-label"><span style="color:red;">*</span>仓库名称:</label>
                                <div class="layui-input-inline">
                                    <input type="text" lay-verify="warehouseNameVerify" maxlength="40"
                                        v-model="warehouse.warehouseName" autocomplete="off" placeholder="请输入仓库/城市名称"
                                           class="layui-input searchVal">
                                </div>
                            </div>

                            <div class="layui-inline layui-col-md12 layui-col-sm12 layui-col-xs12">
                                <label class="layui-form-label">备注:</label>
                                <div class="layui-input-inline">
                                    <textarea maxlength="200" placeholder="请输入备注" v-model="warehouse.remarks"
                                        class="layui-textarea searchVal" ></textarea>
                                </div>
                            </div>
                        </div>
            <div class="float-btn-group" style="width: 30%;left: 0; margin-bottom: 150px;">
                <a class="layui-btn reset-btn" @click="cancel">取消</a>
                <button class="layui-btn layui-btn-radius" id="saveReceivables" lay-submit lay-filter="saveOrUpdate">确定</button>
            </div>
        </form>


        <!-- 表单 查看 -->
        <div v-show="showForm" class="layui-form ren-form" id="showForm">
            <div class="jxc-detail layui-form ren-form">
                <section class="jxc-section">
                    <legend class="aTitle">仓库信息</legend>
                    <hr class="layui-bg-gray">
                    <div class="card">
                        <div class="layui-row form-group">
                            <div class="column layui-col-xs4">
                                <span style="font-size: 16px;font-weight: bold;">仓库名称: </span>
                                <span>{{warehouse.warehouseName}}</span>
                            </div>
                            <div class="column layui-col-xs4">
                                <span style="font-size: 16px;font-weight: bold;">仓库状态:</span>
                                <span>{{warehouseStatusStr}}</span></span>
                            </div>
                        </div>
                        <div class="layui-row form-group">
                            <div class="column layui-col-xs4">
                                <span style="font-size: 16px;font-weight: bold;">在库车辆数: </span>
                                <a style="text-decoration:underline;color:#419BEA;cursor: pointer;"
                                    @click="showCarList(warehouse.warehouseId,1)">{{warehouse.carNum}}台</a>
                            </div>
                        </div>
                        <div class="layui-row form-group">
                            <div class="column layui-col-xs4">
                                <span style="font-size: 16px;font-weight: bold;">备注: </span>
                                <span>{{warehouse.remarks}}</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="float-btn-group">
                <a class="layui-btn reset-btn" @click="cancel">取消</a>
            </div>
        </div>
    </div>

    <!--操作-->
    <script type="text/html" id="barTpl">
    <mperm v-m-perm="['warehouse:warehouse:update']" class="option-btn-margin">
    <a class="layui-grid-btn-xs" lay-event="edit" more-btn-index="{{d.LAY_INDEX-1}}">编辑</a>
    </mperm>
    {{#if(d.warehouseStatus ==0){}}
    <mperm v-m-perm="['warehouse:warehouse:start']" class="option-btn-margin">
    <a class="layui-grid-btn-xs" lay-event="start" more-btn-index="{{d.LAY_INDEX-1}}">启用 </a>
    </mperm>
    {{#}}}

    {{#if(d.warehouseStatus ==1){}}
    <mperm v-m-perm="['warehouse:warehouse:stop']" class="option-btn-margin">
    <a class="layui-grid-btn-xs" lay-event="stop" more-btn-index="{{d.LAY_INDEX-1}}">禁用 </a>
    </mperm>
    {{#}}}
    <mperm v-m-perm="['warehouse:warehouse:delete']" class="option-btn-margin">
        <a class="layui-grid-btn-xs" lay-event="delete" more-btn-index="{{d.LAY_INDEX-1}}">删除 </a>
    </mperm>
</script>

    <script src="../../statics/js/modules/warehouse/warehouse.js"></script>
</body>

</html>